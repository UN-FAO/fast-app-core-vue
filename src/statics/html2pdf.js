/**
 * @license
 *
 * MIT License
 *
 * Copyright (c) 2017 Erik Koopmans
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var html2pdf=function(e,t){var a=function(i,r){r="object"===n(r)?r:{};var i=a.parseInput(i,r),l=t.getPageSize(r.jsPDF);l.inner={width:l.width-r.margin[1]-r.margin[3],height:l.height-r.margin[0]-r.margin[2]},l.inner.ratio=l.inner.height/l.inner.width;var g=a.makeContainer(i,l),c=g.parentElement;if(r.enableLinks){r.links=[];var h=g.querySelectorAll("a"),d=o(g.getBoundingClientRect(),l.k);Array.prototype.forEach.call(h,function(e){for(var t=e.getClientRects(),a=0;a<t.length;a++){var n=o(t[a],l.k);n.left-=d.left,n.top-=d.top,r.links.push({el:e,clientRect:n})}})}var m=r.html2canvas.onrendered||function(){};r.html2canvas.onrendered=function(e){m(e),document.body.removeChild(c),a.makePDF(e,l,r)},e(g,r.html2canvas)};a.parseInput=function(e,t){switch(t.jsPDF=t.jsPDF||{},t.html2canvas=t.html2canvas||{},t.filename=t.filename&&"string"===n(t.filename)?t.filename:"file.pdf",t.enableLinks=!t.hasOwnProperty("enableLinks")||t.enableLinks,t.image=t.image||{},t.image.type=t.image.type||"jpeg",t.image.quality=t.image.quality||.95,n(t.margin)){case"undefined":t.margin=0;case"number":t.margin=[t.margin,t.margin,t.margin,t.margin];break;case"array":if(2===t.margin.length&&(t.margin=[t.margin[0],t.margin[1],t.margin[0],t.margin[1]]),4===t.margin.length)break;default:throw"Invalid margin array."}if(!e)throw"Missing source element or string.";if("string"===n(e))e=i("div",{innerHTML:e});else{if("element"!==n(e))throw"Invalid source - please specify an HTML Element or string.";e=r(e,t.html2canvas.javascriptEnabled)}return e},a.makeContainer=function(e,t){var a={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},n={position:"absolute",width:t.inner.width+t.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};a.opacity=0;var r=i("div",{className:"html2pdf__overlay",style:a}),o=i("div",{className:"html2pdf__container",style:n});o.appendChild(e),r.appendChild(o),document.body.appendChild(r);var l=e.querySelectorAll(".html2pdf__page-break"),g=t.inner.height*t.k/72*96;return Array.prototype.forEach.call(l,function(e){e.style.display="block";var t=e.getBoundingClientRect();e.style.height=g-t.top%g+"px"},this),o},a.makePDF=function(e,a,i){e.getContext("2d");var r=e.height,o=Math.floor(e.width*a.inner.ratio),l=Math.ceil(r/o),g=document.createElement("canvas"),c=g.getContext("2d"),h=a.inner.height;g.width=e.width,g.height=o;for(var d=new t(i.jsPDF),m=0;m<l;m++){m===l-1&&(g.height=r%o,h=g.height*a.inner.width/g.width);var s=g.width,p=g.height;c.fillStyle="white",c.fillRect(0,0,s,p),c.drawImage(e,0,m*o,s,p,0,0,s,p),m&&d.addPage();var f=g.toDataURL("image/"+i.image.type,i.image.quality);if(d.addImage(f,i.image.type,i.margin[1],i.margin[0],a.inner.width,h),i.enableLinks){var u=m*a.inner.height;i.links.forEach(function(e){if(e.clientRect.top>u&&e.clientRect.top<u+a.inner.height){var t=i.margin[1]+e.clientRect.left,n=i.margin[0]+e.clientRect.top-u;d.link(t,n,e.clientRect.width,e.clientRect.height,{url:e.el.href})}})}}"function"===n(i.pdfCallback)?i.pdfCallback(d):d.save(i.filename)};var n=function(e){var t=typeof e;return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var a=document.createElement(e);if(t.className&&(a.className=t.className),t.innerHTML){a.innerHTML=t.innerHTML;for(var n=a.getElementsByTagName("script"),i=n.length;i-- >0;null)n[i].parentNode.removeChild(n[i])}for(var r in t.style)a.style[r]=t.style[r];return a},r=function(e,t){for(var a=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),n=e.firstChild;n;n=n.nextSibling)!0!==t&&1===n.nodeType&&"SCRIPT"===n.nodeName||a.appendChild(r(n,t));return 1===e.nodeType&&("CANVAS"===e.nodeName?(a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(a.value=e.value),a.addEventListener("load",function(){a.scrollTop=e.scrollTop,a.scrollLeft=e.scrollLeft},!0)),a},o=function(e,t){var a={};for(var n in e)a[n]=72*e[n]/96/t;return a};return t.getPageSize=function(e,t,a){if("object"==typeof e){var n=e;e=n.orientation,t=n.unit||t,a=n.format||a}t=t||"mm",a=a||"a4",e=(""+(e||"P")).toLowerCase();var i=(""+a).toLowerCase();switch(pageFormats={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]},t){case"pt":k=1;break;case"mm":k=72/25.4;break;case"cm":k=72/2.54;break;case"in":k=72;break;case"px":k=.75;break;case"pc":case"em":k=12;break;case"ex":k=6;break;default:throw"Invalid unit: "+t}if(pageFormats.hasOwnProperty(i))pageHeight=pageFormats[i][1]/k,pageWidth=pageFormats[i][0]/k;else try{pageHeight=a[1],pageWidth=a[0]}catch(e){throw new Error("Invalid format: "+a)}if("p"===e||"portrait"===e)e="p",pageWidth>pageHeight&&(tmp=pageWidth,pageWidth=pageHeight,pageHeight=tmp);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",pageHeight>pageWidth&&(tmp=pageWidth,pageWidth=pageHeight,pageHeight=tmp)}return{width:pageWidth,height:pageHeight,unit:t,k:k}},a}(html2canvas,jsPDF);